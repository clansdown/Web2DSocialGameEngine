# POST /api/updateCharacterProfile

Update character profile settings including display name and safe display name.

## Request

```json
{
  "auth": {
    "username": "player_name",
    "token": "xxx"
  },
  "character_id": 123,
  "display_name": "NewName",
  "safe_display_name": "NewSafeName",
  "word1": "Fire",
  "word2": "Knight"
}
```

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| auth | object | Yes | Authentication object (see below) |
| character_id | integer | Yes | Character ID to update |
| display_name | string | No | Custom display name (requires adult account) |
| safe_display_name | string | No | Regenerate safe display name |
| word1 | string | No | First word to regenerate safeDisplayName |
| word2 | string | No | Second word to regenerate safeDisplayName |

**Authentication object:**

| Field | Type | Description |
|-------|------|-------------|
| username | string | Account username |
| token | string | Authentication token (alternative to password) |

## Response

### Success (200 OK)

```json
{
  "status": "ok",
  "data": {
    "id": 123,
    "display_name": "NewName",
    "safe_display_name": "FireKnight",
    "level": 1,
    "token": "hex_token_string"
  }
}
```

| Field | Type | Description |
|-------|------|-------------|
| id | integer | Character ID |
| display_name | string | Current display name |
| safe_display_name | string | Current safe display name |
| level | integer | Character level |
| token | string | Updated authentication token |

### Error (400 Bad Request)

```json
{
  "status": "ok",
  "data": {},
  "error": "character_id required"
}
```

```json
{
  "status": "ok",
  "data": {},
  "error": "character not found"
}
```

```json
{
  "status": "ok",
  "data": {},
  "error": "display_name can only be set if account is adult"
}
```

```json
{
  "status": "ok",
  "data": {},
  "error": "Invalid word1 or word2 - words must exist in safe word lists"
}
```

## Implementation Notes

- **display_name restrictions**: Can only be set if the owning account's `adult` flag is true
- **safe_display_name regeneration**: To regenerate safeDisplayName, provide both `word1` and `word2`
  - Both words must exist in their respective safe word files
  - A unique name is generated by appending a number if duplicates exist
- **Partial updates**: Any subset of fields can be updated
- Verifies the character belongs to the authenticated user before updating

## Examples

### Change safe display name

```json
{
  "auth": { "username": "player1", "token": "abc123" },
  "character_id": 123,
  "word1": "Storm",
  "word2": "Wolf"
}
```

### Set custom display name (adult accounts only)

```json
{
  "auth": { "username": "player1", "token": "abc123" },
  "character_id": 123,
  "display_name": "EpicGamer"
}
```

## Implementation Status

- Implemented